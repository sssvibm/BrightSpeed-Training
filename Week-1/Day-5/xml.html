<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button onclick="FetchData()">Fetch</button>
    <hr>
    <div>
        <h1>Login</h1>
        <input type="text" id="name_log" placeholder="Enter The Name"><br><br>
        <input type="password" name="" id="pwd_log" placeholder="Enter The Password"><br><br>
        <button onclick="log()">Login</button>
    </div>
    <hr>

    <div>
        <h1>Register</h1>
        <input type="text" id="name_reg" placeholder="Enter The Name"><br><br>
        <input type="password" name="" id="pwd_reg" placeholder="Enter The Password"><br><br>
        <button onclick="reg()">Register</button>
    </div>




    <script>
        function FetchData() {

            //XmlhttpRequest
            // let xm = new XMLHttpRequest()
            // let ob = {
            //     id:5,
            //     Title: "Forrest Gump",
            //     Year: "2010",
            //     Runtime: "104 min",
            //     Poster: "https://resizing.flixster.com/-XZAfHZM39UwaGJIFWKAE8fS0ak=/v3/t/assets/p15829_v_v13_aa.jpg"
            // }
            // xm.open("GET", "https://dummyapi.online/api/movies")
            // // xm.setRequestHeader('Content-Type', 'application/json');
            // xm.send()
            // xm.onreadystatechange = function () {
            //     if (xm.readyState == 4) {
            //         const res = xm.responseText
            //         document.getElementById("p1").innerHTML=res
            //         console.log(res);
            //     }

            // }

            //fetch

            fetch("http://localhost:3000/log")
                .then(resp => resp.json())
                .then(data => { console.log(data); })
                .catch(err => { console.log(err); })
        }

        function reg() {
            const rg_name = document.getElementById("name_reg").value
            const rg_pwd = document.getElementById("pwd_reg").value

            console.log(rg_name);
            console.log(rg_pwd);

            const ob = {
                name: rg_name,
                password: rg_pwd
            }


            let b = false;

            let res = fetch("http://localhost:3000/log", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(ob)
            }).then().
                then().
                catch(err => {
                    b = true

                })


           console.log(res);
        }


    </script>
</body>

</html>